<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Traffic Analytics - Scrollable Chart</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 300;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            padding: 30px;
            background: rgba(248, 250, 252, 0.8);
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(230, 235, 241, 0.6);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.12);
        }
        
        .stat-number {
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .stat-label {
            color: #64748b;
            font-size: 0.9em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }
        
        .chart-section {
            padding: 30px;
        }
        
        .chart-container {
            position: relative;
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            border: 1px solid rgba(230, 235, 241, 0.6);
            overflow-x: auto;
            overflow-y: hidden;
        }
        
        .chart-wrapper {
            position: relative;
            /* Dynamic width based on number of data points - minimum 30px per day for readability */
            width: max(800px, calc(121 * 30px));
            height: 500px;
        }
        
        .trend-info {
            margin-top: 25px;
            padding: 20px;
            background: linear-gradient(135deg, #f8fafc, #e2e8f0);
            border-radius: 10px;
            border-left: 4px solid #4facfe;
        }
        
        .trend-info h3 {
            margin-top: 0;
            color: #334155;
        }

        /* Zenodo summary styles removed */
        
        .last-updated {
            text-align: center;
            color: #64748b;
            font-size: 0.9em;
            padding: 20px;
            border-top: 1px solid rgba(230, 235, 241, 0.6);
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            color: white;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.3);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79, 172, 254, 0.4);
        }
        
        .btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        /* Enhanced scrollbar styling */
        .chart-container::-webkit-scrollbar {
            height: 14px;
        }
        
        .chart-container::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 7px;
            margin: 0 10px;
        }
        
        .chart-container::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            border-radius: 7px;
            border: 2px solid #f1f5f9;
            min-width: 30px;
        }
        
        .chart-container::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #667eea, #764ba2);
        }
        
        .scroll-hint {
            text-align: center;
            color: #64748b;
            font-size: 0.85em;
            margin-bottom: 15px;
            padding: 10px 15px;
            background: rgba(248, 250, 252, 0.8);
            border-radius: 8px;
            border: 1px solid rgba(230, 235, 241, 0.6);
        }
        
        .scroll-hint strong {
            color: #4facfe;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }
            
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
                padding: 20px;
            }
            
            .stat-card {
                padding: 20px;
            }
            
            .stat-number {
                font-size: 1.8em;
            }
            
            .chart-section {
                padding: 20px;
            }
            
            .chart-wrapper {
                /* Slightly smaller spacing on mobile but still readable */
                width: max(600px, calc(121 * 25px));
            }
            
            .controls {
                gap: 10px;
            }
            
            .btn {
                padding: 8px 15px;
                font-size: 0.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üöÄ GitHub &amp; Zenodo Traffic Analytics</h1>
            <p>Real-time insights across 121 days of data</p>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-number">138</div>
                <div class="stat-label">Total Views</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">57</div>
                <div class="stat-label">Unique Views</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">490</div>
                <div class="stat-label">Total Clones</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">386</div>
                <div class="stat-label">Unique Clones</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">68</div>
                <div class="stat-label">Total Stars</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">1</div>
                <div class="stat-label">Total Forks</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">1</div>
                <div class="stat-label">Active Forks</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">235</div>
                <div class="stat-label">Recent Commits</div>
            </div>
            <!-- Zenodo cards removed -->
        </div>
        
        <div class="chart-section">
            <div class="controls">
                <button class="btn active" onclick="toggleDataset('all')">Show All</button>
                <button class="btn" onclick="toggleDataset('traffic')">Traffic Only</button>
                <button class="btn" onclick="toggleDataset('engagement')">Engagement Only</button>
                <button class="btn" onclick="scrollToEnd()">üìÖ Latest</button>
                <button class="btn" onclick="scrollToStart()">üè† Start</button>
                <button class="btn" onclick="fitToView()">üîç Fit View</button>
            </div>
            
            <div class="scroll-hint">
                üìä <strong>121 days</strong> of data ‚Ä¢ Scroll horizontally with mouse wheel, trackpad, or drag the scrollbar below ‚Ä¢ Use <strong>arrow keys</strong> for precise navigation
            </div>
            
            <div class="chart-container" id="chartContainer">
                <div class="chart-wrapper">
                    <canvas id="trafficChart"></canvas>
                </div>
            </div>
            
            <div class="trend-info">
                <h3>üìà Trend Analysis</h3>
                <p>üìà <strong>Views</strong>: 0.22 per day (R¬≤=0.017)</p><p>üìà <strong>Unique Views</strong>: 0.08 per day (R¬≤=0.010)</p><p>üìâ <strong>Clones</strong>: -4.96 per day (R¬≤=0.050)</p><p>üìâ <strong>Unique Clones</strong>: -4.52 per day (R¬≤=0.110)</p><p>üìà <strong>Stars</strong>: 0.30 per day (R¬≤=0.144)</p><p>üìà <strong>Forks</strong>: 0.01 per day (R¬≤=0.430)</p><p>üìà <strong>Active Forks</strong>: 0.01 per day (R¬≤=0.430)</p>
            </div>
        </div>

        <!-- Zenodo highlights removed -->
        
        <div class="last-updated">
            Last updated: October 30, 2025 23:58
        </div>
    </div>

    <script>
        // Chart configuration with enhanced scrolling
        const ctx = document.getElementById('trafficChart').getContext('2d');
        const chartData = {"labels": ["2025-07-02", "2025-07-03", "2025-07-04", "2025-07-05", "2025-07-06", "2025-07-07", "2025-07-08", "2025-07-09", "2025-07-10", "2025-07-11", "2025-07-12", "2025-07-13", "2025-07-14", "2025-07-15", "2025-07-16", "2025-07-17", "2025-07-18", "2025-07-19", "2025-07-20", "2025-07-21", "2025-07-22", "2025-07-23", "2025-07-25", "2025-07-26", "2025-07-27", "2025-07-28", "2025-07-29", "2025-07-30", "2025-07-31", "2025-08-01", "2025-08-02", "2025-08-03", "2025-08-04", "2025-08-05", "2025-08-06", "2025-08-07", "2025-08-08", "2025-08-09", "2025-08-10", "2025-08-11", "2025-08-12", "2025-08-13", "2025-08-14", "2025-08-15", "2025-08-16", "2025-08-17", "2025-08-18", "2025-08-19", "2025-08-20", "2025-08-21", "2025-08-22", "2025-08-23", "2025-08-24", "2025-08-25", "2025-08-26", "2025-08-27", "2025-08-28", "2025-08-29", "2025-08-30", "2025-08-31", "2025-09-01", "2025-09-02", "2025-09-03", "2025-09-04", "2025-09-05", "2025-09-06", "2025-09-07", "2025-09-08", "2025-09-09", "2025-09-10", "2025-09-11", "2025-09-12", "2025-09-13", "2025-09-14", "2025-09-15", "2025-09-16", "2025-09-17", "2025-09-18", "2025-09-19", "2025-09-20", "2025-09-21", "2025-09-22", "2025-09-23", "2025-09-24", "2025-09-25", "2025-09-26", "2025-09-27", "2025-09-28", "2025-09-29", "2025-09-30", "2025-10-01", "2025-10-02", "2025-10-03", "2025-10-04", "2025-10-05", "2025-10-06", "2025-10-07", "2025-10-08", "2025-10-09", "2025-10-10", "2025-10-11", "2025-10-12", "2025-10-13", "2025-10-14", "2025-10-15", "2025-10-16", "2025-10-17", "2025-10-18", "2025-10-19", "2025-10-20", "2025-10-21", "2025-10-22", "2025-10-23", "2025-10-24", "2025-10-25", "2025-10-26", "2025-10-27", "2025-10-28", "2025-10-29", "2025-10-30", "2025-10-31"], "datasets": [{"label": "Total Views", "data": [3, 4, 12, 2, 8, 4, 19, 10, 25, 35, 11, 0, 7, 7, 102, 14, 32, 0, 0, 118, 18, 0, 0, 0, 0, 55, 11, 11, 66, 0, 54, 10, 20, 10, 11, 46, 187, 51, 12, 12, 12, 145, 272, 24, 104, 38, 52, 13, 53, 13, 377, 0, 105, 14, 14, 13, 13, 13, 25, 11, 0, 0, 8, 42, 19, 0, 4, 12, 6, 9, 12, 3, 10, 11, 34, 16, 26, 9, 27, 0, 33, 10, 10, 9, 27, 126, 16, 120, 57, 70, 16, 64, 32, 63, 27, 28, 98, 117, 60, 37, 13, 0, 23, 24, 12, 60, 51, 121, 100, 31, 47, 88, 14, 20, 332, 15, 4, 31, 17, 4, 2], "borderColor": "rgb(75, 192, 192)", "backgroundColor": "rgba(75, 192, 192, 0.1)", "tension": 0.1, "order": 2}, {"label": "Unique Views", "data": [1, 4, 10, 2, 8, 4, 19, 10, 15, 25, 11, 0, 7, 7, 54, 14, 16, 0, 0, 82, 18, 0, 0, 0, 0, 33, 11, 11, 55, 0, 54, 10, 20, 10, 11, 46, 98, 51, 12, 12, 12, 121, 181, 24, 104, 38, 52, 13, 53, 13, 65, 0, 27, 14, 14, 13, 13, 13, 25, 11, 0, 0, 8, 35, 19, 0, 4, 12, 3, 6, 6, 3, 10, 11, 27, 16, 26, 9, 27, 0, 33, 10, 10, 9, 27, 36, 16, 64, 29, 55, 16, 8, 8, 63, 27, 28, 54, 69, 48, 37, 13, 0, 23, 24, 12, 48, 51, 85, 56, 31, 47, 24, 14, 20, 27, 15, 4, 28, 17, 3, 2], "borderColor": "rgb(255, 99, 132)", "backgroundColor": "rgba(255, 99, 132, 0.1)", "tension": 0.1, "order": 2}, {"label": "Total Clones", "data": [37, 210, 374, 674, 733, 740, 534, 705, 1730, 1310, 1094, 840, 713, 740, 1326, 371, 70, 516, 2097, 2099, 438, 45, 70, 210, 65, 1984, 44, 209, 121, 1519, 1188, 913, 1936, 62, 60, 557, 507, 662, 647, 95, 346, 623, 162, 1371, 2067, 4553, 1966, 1028, 1102, 517, 77, 714, 545, 3540, 1201, 3569, 2557, 757, 511, 77, 625, 66, 139, 181, 94, 614, 908, 207, 66, 13, 191, 19, 90, 321, 237, 53, 135, 186, 270, 115, 136, 80, 35, 588, 51, 702, 1560, 2075, 754, 1373, 597, 78, 440, 916, 953, 104, 66, 136, 1135, 1089, 224, 740, 346, 702, 820, 225, 388, 629, 536, 146, 100, 105, 120, 102, 156, 125, 159, 297, 83, 82, 5], "borderColor": "rgb(54, 162, 235)", "backgroundColor": "rgba(54, 162, 235, 0.1)", "tension": 0.1, "order": 2}, {"label": "Unique Clones", "data": [35, 200, 340, 596, 572, 681, 481, 645, 1425, 1170, 869, 594, 522, 594, 1237, 336, 70, 463, 1980, 1973, 369, 45, 70, 190, 43, 1962, 44, 209, 121, 1149, 717, 264, 843, 51, 60, 557, 507, 662, 484, 72, 346, 587, 60, 621, 669, 573, 742, 127, 156, 517, 77, 168, 139, 1974, 432, 2463, 1843, 198, 511, 77, 625, 66, 139, 181, 94, 174, 627, 16, 14, 13, 26, 19, 60, 68, 55, 49, 20, 186, 234, 101, 24, 70, 35, 155, 51, 192, 271, 266, 242, 303, 133, 78, 323, 207, 353, 104, 45, 124, 799, 885, 224, 740, 324, 535, 690, 189, 325, 496, 501, 125, 73, 73, 59, 60, 124, 90, 138, 263, 67, 74, 5], "borderColor": "rgb(255, 206, 86)", "backgroundColor": "rgba(255, 206, 86, 0.1)", "tension": 0.1, "order": 2}, {"label": "Total Stars", "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 47, 47, 0, 0, 47, 47, 47, 0, 0, 46, 0, 46, 46, 46, 0, 48, 48, 48, 48, 48, 0, 53, 0, 53, 53, 53, 53, 53, 53, 53, 53, 53, 54, 54, 54, 54, 54, 54, 0, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 54, 55, 55, 55, 55, 55, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 60, 0, 60, 60, 60, 61, 61, 62, 62, 62, 0, 0, 62, 61, 0, 0, 0, 0, 64, 64, 0, 64, 64, 65, 65, 67, 68, 68, 68, 68, 68, 68, 68, 68, 0, 68, 68, 68, 68, 68, 0], "borderColor": "rgb(153, 102, 255)", "backgroundColor": "rgba(153, 102, 255, 0.1)", "tension": 0.1, "order": 2}, {"label": "Total Forks", "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0], "borderColor": "rgb(255, 159, 64)", "backgroundColor": "rgba(255, 159, 64, 0.1)", "tension": 0.1, "order": 2}, {"label": "Active Forks", "data": [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 0], "borderColor": "rgb(199, 199, 199)", "backgroundColor": "rgba(199, 199, 199, 0.1)", "tension": 0.1, "order": 2}, {"label": "Daily Commits", "data": [10, 39, 45, 94, 57, 62, 56, 32, 70, 68, 47, 53, 44, 28, 30, 8, 3, 5, 155, 15, 6, 0, 28, 7, 8, 7, 3, 17, 11, 52, 1, 61, 10, 0, 5, 0, 18, 11, 6, 3, 4, 4, 24, 32, 32, 35, 8, 10, 1, 1, 5, 0, 77, 17, 114, 68, 3, 7, 1, 17, 24, 15, 15, 13, 1, 17, 9, 4, 1, 10, 0, 0, 6, 5, 1, 0, 0, 0, 0, 0, 1, 0, 5, 2, 5, 5, 16, 13, 5, 10, 0, 0, 5, 9, 14, 0, 2, 6, 17, 1, 1, 28, 21, 13, 25, 6, 19, 37, 17, 1, 2, 1, 1, 1, 0, 2, 1, 1, 1, 2, 0], "borderColor": "rgb(255, 99, 255)", "backgroundColor": "rgba(255, 99, 255, 0.1)", "tension": 0.1, "order": 2}]};
        const totalDays = 121;
        
        const chart = new Chart(ctx, {
            type: 'line',
            data: chartData,
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: {
                    mode: 'index',
                    intersect: false,
                },
                plugins: {
                    title: {
                        display: true,
                        text: `GitHub Repository Traffic Trends (${totalDays} days)`,
                        font: {
                            size: 18,
                            weight: 'bold'
                        },
                        padding: 20
                    },
                    legend: {
                        position: 'top',
                        labels: {
                            usePointStyle: true,
                            padding: 15,
                            font: {
                                size: 12
                            }
                        }
                    },
                    tooltip: {
                        backgroundColor: 'rgba(0, 0, 0, 0.8)',
                        titleColor: 'white',
                        bodyColor: 'white',
                        borderColor: 'rgba(255, 255, 255, 0.2)',
                        borderWidth: 1,
                        cornerRadius: 8,
                        displayColors: true,
                        padding: 12
                    }
                },
                scales: {
                    x: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Date',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        ticks: {
                            maxRotation: 45,
                            minRotation: 0,
                            font: {
                                size: 11
                            },
                            // Smart label display based on data density
                            callback: function(value, index) {
                                const totalLabels = chartData.labels.length;
                                let step;
                                
                                // Adaptive step size based on total days
                                if (totalLabels <= 30) step = 1;        // Show all for <= 30 days
                                else if (totalLabels <= 60) step = 2;   // Every 2nd day for 31-60 days
                                else if (totalLabels <= 90) step = 3;   // Every 3rd day for 61-90 days
                                else if (totalLabels <= 180) step = 7;  // Weekly for 91-180 days
                                else step = 14;                         // Bi-weekly for >180 days
                                
                                return index % step === 0 ? this.getLabelForValue(value) : '';
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)',
                            lineWidth: 1
                        }
                    },
                    y: {
                        display: true,
                        title: {
                            display: true,
                            text: 'Count',
                            font: {
                                size: 14,
                                weight: 'bold'
                            }
                        },
                        beginAtZero: true,
                        ticks: {
                            font: {
                                size: 11
                            }
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.05)',
                            lineWidth: 1
                        }
                    }
                },
                elements: {
                    line: {
                        tension: 0.2
                    },
                    point: {
                        radius: totalDays > 90 ? 2 : 3,  // Smaller points for lots of data
                        hoverRadius: 6,
                        hitRadius: 8
                    }
                }
            }
        });

        // Enhanced control functions
        function toggleDataset(type) {
            // Update button states
            document.querySelectorAll('.btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            chart.data.datasets.forEach((dataset, index) => {
                switch(type) {
                    case 'all':
                        dataset.hidden = false;
                        break;
                    case 'traffic':
                        // Show views and clones (indices 0-3)
                        dataset.hidden = index > 3;
                        break;
                    case 'engagement':
                        // Show stars, forks, commits (indices 4+)
                        dataset.hidden = index < 4;
                        break;
                }
            });
            
            chart.update();
        }
        
        function scrollToEnd() {
            const container = document.getElementById('chartContainer');
            container.scrollTo({ 
                left: container.scrollWidth - container.clientWidth,
                behavior: 'smooth'
            });
        }
        
        function scrollToStart() {
            const container = document.getElementById('chartContainer');
            container.scrollTo({ 
                left: 0,
                behavior: 'smooth'
            });
        }
        
        function fitToView() {
            const container = document.getElementById('chartContainer');
            const wrapper = container.querySelector('.chart-wrapper');
            const containerWidth = container.clientWidth;
            const wrapperWidth = wrapper.offsetWidth;
            
            if (wrapperWidth > containerWidth) {
                // Scroll to show roughly the middle portion of the data
                const scrollPosition = (wrapperWidth - containerWidth) / 2;
                container.scrollTo({ 
                    left: scrollPosition,
                    behavior: 'smooth'
                });
            }
        }
        
        // Auto-scroll to show latest data on load
        window.addEventListener('load', function() {
            setTimeout(scrollToEnd, 500);
        });
        
        // Enhanced keyboard navigation
        document.addEventListener('keydown', function(e) {
            const container = document.getElementById('chartContainer');
            const scrollAmount = Math.max(100, container.clientWidth * 0.1); // 10% of visible width
            
            switch(e.key) {
                case 'ArrowLeft':
                    container.scrollLeft -= scrollAmount;
                    e.preventDefault();
                    break;
                case 'ArrowRight':
                    container.scrollLeft += scrollAmount;
                    e.preventDefault();
                    break;
                case 'Home':
                    scrollToStart();
                    e.preventDefault();
                    break;
                case 'End':
                    scrollToEnd();
                    e.preventDefault();
                    break;
                case 'PageUp':
                    container.scrollLeft -= container.clientWidth * 0.8;
                    e.preventDefault();
                    break;
                case 'PageDown':
                    container.scrollLeft += container.clientWidth * 0.8;
                    e.preventDefault();
                    break;
            }
        });
        
        // Enhanced touch/mouse wheel horizontal scrolling
        const chartContainer = document.getElementById('chartContainer');
        
        chartContainer.addEventListener('wheel', function(e) {
            // Always handle wheel events for horizontal scrolling
            if (e.shiftKey || Math.abs(e.deltaX) > Math.abs(e.deltaY)) {
                // Natural horizontal scrolling or shift+wheel
                return;
            }
            
            // Convert vertical scroll to horizontal
            e.preventDefault();
            const scrollAmount = e.deltaY * 2; // Amplify for smoother scrolling
            this.scrollLeft += scrollAmount;
        }, { passive: false });
        
        // Touch swipe support for mobile
        let touchStartX = 0;
        let touchStartY = 0;
        let isScrolling = false;
        
        chartContainer.addEventListener('touchstart', function(e) {
            touchStartX = e.touches[0].clientX;
            touchStartY = e.touches[0].clientY;
            isScrolling = false;
        });
        
        chartContainer.addEventListener('touchmove', function(e) {
            if (!touchStartX || !touchStartY) return;
            
            const touchX = e.touches[0].clientX;
            const touchY = e.touches[0].clientY;
            const diffX = touchStartX - touchX;
            const diffY = touchStartY - touchY;
            
            if (!isScrolling) {
                // Determine scroll direction
                if (Math.abs(diffX) > Math.abs(diffY)) {
                    // Horizontal scroll
                    isScrolling = true;
                    e.preventDefault();
                }
            }
            
            if (isScrolling) {
                e.preventDefault();
            }
        }, { passive: false });
        
        // Visual feedback for scroll position
        function updateScrollIndicator() {
            const container = document.getElementById('chartContainer');
            const scrollPercent = (container.scrollLeft / (container.scrollWidth - container.clientWidth)) * 100;
            
            // Optional: Add a scroll position indicator
            // You could display this percentage somewhere in the UI if desired
        }
        
        chartContainer.addEventListener('scroll', updateScrollIndicator);
    </script>
</body>
</html>